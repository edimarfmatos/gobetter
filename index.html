<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GoBetter — Site</title>
  <meta name="description" content="GoBetter - transporte de moto e carro" />

  <!-- ========================
       CONFIGURAÇÃO ÚNICA (edite apenas aqui)
       Substitua os valores do FIREBASE_CONFIG pelo objeto do seu projeto.
       ======================== -->
  <script>
    window.GB_CONFIG = {
      LOGO_URL: 'https://raw.githubusercontent.com/edimarfmatos/img_gobetter/refs/heads/main/logo%20gobetter.jpg',
      BANNER_IMAGES: [
        'https://raw.githubusercontent.com/edimarfmatos/gobetter/b9f4ee1e587f210bd6302716e2878e63a2b6d273/img/carroB.svg',
        'https://raw.githubusercontent.com/edimarfmatos/gobetter/bab086dfed7d1f103d5dae5cc86b483383073f11/img/logo.svg',
        'https://raw.githubusercontent.com/edimarfmatos/gobetter/32b3423e29d82c6764e3da8f1feb7965cf5b255c/img/moto.svg'
      ],
      GALLERY_IMAGES: [
        'https://raw.githubusercontent.com/edimarfmatos/gobetter/refs/heads/main/img/foto10.jpg',
        'https://raw.githubusercontent.com/edimarfmatos/gobetter/refs/heads/main/img/foto11.jpg',
        'https://raw.githubusercontent.com/edimarfmatos/gobetter/refs/heads/main/img/foto12.jpg',
        'https://raw.githubusercontent.com/edimarfmatos/gobetter/refs/heads/main/img/foto13.jpg'
      ],
      SIGNUP_LINK: 'https://play.google.com/store/apps/details?id=com.gobetter.customerapp',
      QR_IMAGE_URL: 'https://raw.githubusercontent.com/edimarfmatos/gobetter/refs/heads/main/img/qr_passageiro.png',
      BANNER_INTERVAL_MS: 4000,
      COMMENTS_STORAGE_KEY: 'gobetter_comments_v1'
    };

    /* --- FIREBASE ---
       Cole aqui o seu objeto de configuração web do Firebase (após criar o app web no console):
       Exemplo:
       window.FIREBASE_CONFIG = {
         apiKey: "AAA....",
         authDomain: "gobetter.firebaseapp.com",
         projectId: "gobetter",
         storageBucket: "gobetter.appspot.com",
         messagingSenderId: "1234567890",
         appId: "1:123:web:abcdef"
       };
       Se deixar vazio ou não colocar, o site usará localStorage como fallback.
    */
    // window.FIREBASE_CONFIG = {};
  </script>

  <!-- ========================
       ESTILOS (mantive sua estética original)
       ======================== -->
  <style>
    :root{
      --bg: #0a0a0a;
      --card: #121212;
      --accent: #ffcc00;
      --accent-2: #ff3b3b;
      --text: #f2f2f2;
      --muted: #bfbfbf;
      --max-width: 1100px;
    }
    html,body{ margin:0;padding:0; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:var(--bg); color:var(--text); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}
    .container{ max-width:var(--max-width); margin:0 auto; padding:20px; }
    header.site-header{ border-bottom:1px solid rgba(255,255,255,0.04); padding:12px 0; position:sticky; top:0; background:linear-gradient(180deg, rgba(10,10,10,0.95), rgba(10,10,10,0.85)); z-index:100; }
    .header-inner{ display:flex; align-items:center; justify-content:space-between; gap:16px; }
    .brand{ display:flex; align-items:center; gap:12px; }
    .brand img{ height:48px; width:auto; display:block; border-radius:6px; object-fit:contain; }
    nav.site-nav a{ color:var(--text); text-decoration:none; margin-left:18px; font-weight:600; opacity:0.95; }
    .cta{ background:var(--accent-2); color:white; padding:8px 14px; border-radius:8px; text-decoration:none; font-weight:700; }
    .hero{ margin-top:22px; display:grid; grid-template-columns:1fr; gap:18px; align-items:center; }
    .hero-inner{ position:relative; overflow:hidden; border-radius:12px; background:linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.6)); min-height:260px; }
    .banner-slide{ position:absolute; inset:0; background-size:cover; background-position:center; transition:opacity .8s ease; opacity:0; }
    .banner-slide.active{ opacity:1; }
    .hero-content{ position:relative; z-index:5; padding:20px; display:flex; flex-direction:column; gap:12px; align-items:flex-start; color:var(--text); text-shadow:0 4px 18px rgba(0,0,0,0.6); }
    .slogan{ font-size:clamp(18px,3vw,28px); font-weight:800; letter-spacing:0.2px; }
    .sub{ color:var(--muted); max-width:720px; }
    .banner-controls{ position:absolute; z-index:6; right:12px; bottom:12px; display:flex; gap:8px; }
    .banner-btn{ background:rgba(0,0,0,0.5); border:1px solid rgba(255,255,255,0.06); padding:8px; border-radius:8px; color:var(--text); cursor:pointer; }
    .grid-3{ display:grid; grid-template-columns:repeat(3,1fr); gap:18px; margin-top:18px; }
    .card{ background:var(--card); padding:16px; border-radius:12px; box-shadow:0 6px 20px rgba(0,0,0,0.45); }
    .card h3{ margin:0 0 8px 0; }
    .muted{ color:var(--muted); }
    .gallery{ display:grid; grid-template-columns:repeat(4,1fr); gap:10px; }
    .gallery .pic{ width:100%; position:relative; border-radius:8px; overflow:hidden; background:#222; min-height:0; }
    .gallery .pic::before{ content:''; display:block; padding-top:100%; }
    .gallery img{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; }
    section{ padding:28px 0; }
    .comment-form input, .comment-form textarea{ width:100%; padding:10px; margin-bottom:8px; border-radius:8px; border:1px solid rgba(255,255,255,0.06); background:#0d0d0d; color:var(--text); resize:vertical; }
    .comments-list{ margin-top:12px; display:flex; flex-direction:column; gap:10px; }
    .comment{ background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:12px; border-radius:10px; }
    .small{ font-size:12px; color:var(--muted); }
    footer{ border-top:1px solid rgba(255,255,255,0.04); padding:18px 0; margin-top:28px; text-align:center; color:var(--muted); }
    @media (max-width:900px){ .grid-3{ grid-template-columns:1fr; } .gallery{ grid-template-columns:repeat(2,1fr); } .brand img{ height:42px; } }
    @media (max-width:480px){ nav.site-nav{ display:none; } .hero-inner{ min-height:220px; } .gallery{ grid-template-columns:repeat(2,1fr); gap:8px; } }
  </style>
</head>
<body>
  <!-- ========================
       CABEÇALHO
       ======================== -->
  <header class="site-header">
    <div class="container header-inner">
      <div class="brand">
        <a href="#home" aria-label="GoBetter - Home">
          <img id="gbLogo" src="" alt="Logo GoBetter" >
        </a>
        <div>
          <div style="font-weight:800">GoBetter</div>
          <div style="font-size:12px;color:var(--muted)">Transporte de moto e carro</div>
        </div>
      </div>

      <nav class="site-nav" aria-label="Navegação principal">
        <a href="#home">Home</a>
        <a href="#sobre">Sobre nós</a>
        <a href="#contato">Contato</a>
        <a class="cta" id="signupBtn" href="#" target="_blank" rel="noopener">Cadastre-se</a>
      </nav>
    </div>
  </header>

  <!-- ========================
       HOME (principal)
       ======================== -->
  <main id="home" class="container">
    <section class="hero">
      <div class="hero-inner" id="heroInner">
        <!-- Slides são adicionados por JS -->
        <div class="hero-content">
          <div class="slogan">levando você de um jeito melhor</div>
          <div style="display:flex;flex-direction: column;gap:12px;align-items:center;margin-top:8px;">
            <a id="signupLink" class="cta" href="#" target="_blank" rel="noopener">Fazer cadastro</a>
            <a href="#contato" class="banner-btn">Fale conosco</a>
          </div>
        </div>

        <div class="banner-controls" id="bannerControls" aria-hidden="false">
          <button class="banner-btn" id="prevSlide" title="Anterior">◀</button>
          <button class="banner-btn" id="nextSlide" title="Próximo">▶</button>
        </div>
      </div>

      <div class="sub">Transporte seguro, rápido e econômico. Motoristas qualificados e clientes satisfeitos — cadastre-se e experimente.</div>

      <div class="grid-3">
        <div class="card">
          <h3>Apresentação</h3>
          <p class="muted">GoBetter conecta passageiros e motofretistas / motoristas com foco em segurança e praticidade. Comece agora — cadastre-se com QR ou link.</p>
        </div>
        <div class="card">
          <h3>Benefícios</h3>
          <ul class="muted">
            <li>Transporte seguro e confiável</li>
            <li>Tarifas competitivas</li>
            <li>Atendimento rápido</li>
          </ul>
        </div>
        <div class="card">
          <h3>Cadastro</h3>
          <p class="muted">Leia o QR code ou clique no botão para se cadastrar.</p>
          <div style="display:flex;gap:10px;align-items:center;margin-top:8px;">
            <img id="qrImg" src="" alt="QR Code de cadastro" style="width:90px;height:90px;border-radius:8px;object-fit:cover;background:#111;border:1px solid rgba(255,255,255,0.03)">
            <div>
              <div class="small muted">Ou acesse:</div>
              <a id="signupLinkText" href="#" target="_blank" rel="noopener" class="muted">Link para cadastro</a>
            </div>
          </div>
        </div>
      </div>

      <div style="margin-top:16px;">
        <h3 style="margin:8px 0 10px 0">Galeria</h3>
        <div class="gallery" id="galleryArea" aria-live="polite"></div>
      </div>
    </section>

    <!-- SOBRE -->
    <section id="sobre">
      <div style="display:flex;gap:18px;align-items:flex-start;flex-wrap:wrap;">
        <div style="flex:1;min-width:260px;" class="card">
          <h3>Sobre o GoBetter</h3>
          <p class="muted">GoBetter é uma plataforma de transporte para motos e carros, pensada para agilidade, economia e segurança. Reunimos tecnologia e atendimento local para melhorar sua viagem.</p>
          <h4>Benefícios</h4>
          <ul class="muted">
            <li>Fácil de usar</li>
            <li>Tarifas justas</li>
            <li>Rastreamento de corridas</li>
          </ul>
        </div>

        <div style="width:320px;max-width:40%;" class="card">
          <h3>Fotos (placeholder)</h3>
          <div style="width:100%;border-radius:8px;overflow:hidden;background:#111;padding:12px;display:flex;justify-content:center;align-items:center">
            <div style="width:100%;aspect-ratio:1/1;background:#222;display:flex;align-items:center;justify-content:center;border-radius:6px;">
              <span class="muted">Substituir pelo link das imagens</span>
            </div>
          </div>
        </div>
      </div>

      <div style="margin-top:18px;" class="card">
        <h3>Vídeo institucional</h3>
        <p class="muted">O vídeo ficará na página "Sobre nós". Substitua o <code>&lt;iframe&gt;</code> pelo embed do YouTube/Vimeo quando tiver.</p>
        <div style="position:relative;padding-top:56.25%;background:#000;border-radius:8px;overflow:hidden">
          <iframe id="promoVideo" style="position:absolute;inset:0;border:0" src="" allowfullscreen title="Vídeo GoBetter"></iframe>
        </div>
      </div>
    </section>

    <!-- CONTATO / COMENTÁRIOS -->
    <section id="contato">
      <div class="card">
        <h3>Contato</h3>
        <p class="muted">Tem dúvidas, sugestões ou reclamações? Deixe uma mensagem — se o Firebase estiver ativado, os comentários serão exibidos para todos em tempo real. Se não, usarão localStorage como fallback.</p>

        <div class="comment-form" style="margin-top:12px;">
          <input id="commentName" type="text" placeholder="Seu nome (opcional)">
          <textarea id="commentMsg" rows="4" placeholder="Escreva seu comentário..."></textarea>
          <div style="display:flex;gap:8px;">
            <button id="sendComment" class="cta" style="background:var(--accent-2);border:none;">Enviar comentário</button>
            <button id="clearComments" class="banner-btn" style="background:transparent;">Limpar comentários</button>
          </div>
        </div>

        <div class="comments-list" id="commentsList" aria-live="polite" style="margin-top:12px;"></div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <div style="margin-bottom:6px">© <strong>GoBetter</strong> — Todos os direitos reservados</div>
      <div class="small">Feito para web — responsivo para desktop e mobile</div>
    </div>
  </footer>

  <!-- ========================
       SDK MODULAR FIREBASE (v10) - usado apenas se FIREBASE_CONFIG estiver presente.
       ======================== -->
  <script type="module">
    // Importa módulos (versão modular moderna)
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
    import {
      getFirestore, collection, addDoc, onSnapshot, serverTimestamp, query, orderBy, getDocs, writeBatch
    } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js";

    (function(){
      // Configs do site
      const cfg = window.GB_CONFIG || {};
      // Elementos
      const logoEl = document.getElementById('gbLogo');
      const signupBtn = document.getElementById('signupBtn');
      const signupLink = document.getElementById('signupLink');
      const signupLinkText = document.getElementById('signupLinkText');
      const qrImg = document.getElementById('qrImg');
      const galleryArea = document.getElementById('galleryArea');
      const heroInner = document.getElementById('heroInner');
      const promoVideo = document.getElementById('promoVideo');

      // Aplicar configurações visuais
      logoEl.src = cfg.LOGO_URL || '';
      signupBtn.href = cfg.SIGNUP_LINK || '#';
      signupLink.href = cfg.SIGNUP_LINK || '#';
      signupLinkText.href = cfg.SIGNUP_LINK || '#';
      qrImg.src = cfg.QR_IMAGE_URL || '';
      promoVideo.src = cfg.VIDEO_EMBED || '';

      // -----------------------
      // Banner rotativo (igual ao original)
      // -----------------------
      const slides = [];
      const bannerImages = Array.isArray(cfg.BANNER_IMAGES) ? cfg.BANNER_IMAGES : [];
      let currentIndex = 0;
      let autoplayTimer = null;
      const intervalMs = cfg.BANNER_INTERVAL_MS || 4000;

      function createSlides(){
        bannerImages.forEach((url, idx) => {
          const div = document.createElement('div');
          div.className = 'banner-slide';
          div.style.backgroundImage = `url('${url}')`;
          div.setAttribute('data-idx', idx);
          heroInner.appendChild(div);
          slides.push(div);
        });
        if(slides.length === 0){
          const div = document.createElement('div');
          div.className = 'banner-slide active';
          div.style.background = 'linear-gradient(135deg,#111,#1a1a1a)';
          div.innerHTML = '<div style="position:absolute;left:20px;bottom:20px;color:var(--muted)">Imagem do banner não configurada. Substitua GB_CONFIG.BANNER_IMAGES.</div>';
          heroInner.appendChild(div);
          slides.push(div);
        } else {
          slides[0].classList.add('active');
        }
      }
      function goToSlide(index){ if(slides.length===0) return; slides.forEach((s,i)=>s.classList.toggle('active', i===index)); currentIndex=index; }
      function nextSlide(){ goToSlide((currentIndex+1)%slides.length); }
      function prevSlide(){ goToSlide((currentIndex-1+slides.length)%slides.length); }
      function startAutoplay(){ stopAutoplay(); autoplayTimer = setInterval(nextSlide, intervalMs); }
      function stopAutoplay(){ if(autoplayTimer) clearInterval(autoplayTimer); autoplayTimer = null; }

      document.getElementById('prevSlide').addEventListener('click', () => { prevSlide(); startAutoplay(); });
      document.getElementById('nextSlide').addEventListener('click', () => { nextSlide(); startAutoplay(); });

      createSlides();
      startAutoplay();
      heroInner.addEventListener('mouseenter', stopAutoplay);
      heroInner.addEventListener('mouseleave', startAutoplay);

      // -----------------------
      // Galeria
      // -----------------------
      const galleryImages = Array.isArray(cfg.GALLERY_IMAGES) ? cfg.GALLERY_IMAGES : [];
      function populateGallery(){
        galleryArea.innerHTML = '';
        if(galleryImages.length === 0){
          for(let i=0;i<4;i++){
            const pic = document.createElement('div'); pic.className = 'pic card';
            pic.innerHTML = '<div style="width:100%;aspect-ratio:1/1;background:#222;display:flex;align-items:center;justify-content:center;border-radius:6px;color:var(--muted)">Imagem de exemplo</div>';
            galleryArea.appendChild(pic);
          }
          return;
        }
        galleryImages.forEach(url => {
          const wrap = document.createElement('div'); wrap.className = 'pic';
          const img = document.createElement('img'); img.src = url; img.alt = 'Imagem GoBetter';
          wrap.appendChild(img);
          galleryArea.appendChild(wrap);
        });
      }
      populateGallery();

      // -----------------------
      // Comentários: Firestore OR localStorage (fallback)
      // -----------------------
      const commentsKey = cfg.COMMENTS_STORAGE_KEY || 'gobetter_comments_v1';
      const nameInput = document.getElementById('commentName');
      const msgInput = document.getElementById('commentMsg');
      const sendBtn = document.getElementById('sendComment');
      const clearBtn = document.getElementById('clearComments');
      const commentsListEl = document.getElementById('commentsList');

      function escapeHtml(str){
        if(!str) return '';
        return String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,"&#039;");
      }

      function loadCommentsLocal(){
        try{
          const raw = localStorage.getItem(commentsKey);
          if(!raw) return [];
          const arr = JSON.parse(raw);
          if(Array.isArray(arr)) return arr;
        }catch(e){ console.error('Erro lendo comentários (local):', e); }
        return [];
      }
      function saveCommentsLocal(arr){
        try{ localStorage.setItem(commentsKey, JSON.stringify(arr)); }catch(e){ console.error('Erro salvando comentários (local):', e); }
      }
      function renderCommentsLocal(){
        const items = loadCommentsLocal();
        commentsListEl.innerHTML = '';
        if(items.length === 0){
          commentsListEl.innerHTML = '<div class="muted small">Nenhum comentário ainda. Seja o primeiro!</div>';
          return;
        }
        items.slice().reverse().forEach(c => {
          const d = document.createElement('div');
          d.className = 'comment';
          d.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:flex-start;gap:12px"><strong>${escapeHtml(c.name||'Anônimo')}</strong><div class="small">${new Date(c.ts).toLocaleString()}</div></div><div style="margin-top:6px">${escapeHtml(c.msg)}</div>`;
          commentsListEl.appendChild(d);
        });
      }

      // FIREBASE: verifica se há configuração no HEAD
      const fbCfg = window.FIREBASE_CONFIG || null;
      let db = null;
      let unsubscribe = null;
      const usingFirestore = !!(fbCfg && fbCfg.projectId && fbCfg.apiKey);

      if(usingFirestore){
        try {
          // inicializa Firebase e Firestore
          const app = initializeApp(fbCfg);
          db = getFirestore(app);

          // referência à coleção 'comments'
          const commentsCol = collection(db, 'comments');
          const q = query(commentsCol, orderBy('timestamp', 'desc'));

          // listener em tempo real
          unsubscribe = onSnapshot(q, (snapshot) => {
            commentsListEl.innerHTML = '';
            if(snapshot.empty){
              commentsListEl.innerHTML = '<div class="muted small">Nenhum comentário ainda. Seja o primeiro!</div>';
              return;
            }
            snapshot.forEach(doc => {
              const d = doc.data();
              const div = document.createElement('div');
              div.className = 'comment';
              div.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:flex-start;gap:12px"><strong>${escapeHtml(d.name||'Anônimo')}</strong><div class="small">${d.timestamp && d.timestamp.toDate ? d.timestamp.toDate().toLocaleString() : ''}</div></div><div style="margin-top:6px">${escapeHtml(d.msg || d.text || '')}</div>`;
              commentsListEl.appendChild(div);
            });
          }, err => {
            console.error('Listener Firestore erro:', err);
            renderCommentsLocal();
          });

        } catch(e) {
          console.error('Erro inicializando Firestore:', e);
          renderCommentsLocal();
        }
      } else {
        // fallback
        renderCommentsLocal();
      }

      // Enviar comentário: grava no Firestore se estiver ativo, senão no localStorage
      sendBtn.addEventListener('click', async () => {
        const name = nameInput.value.trim() || 'Anônimo';
        const msg = msgInput.value.trim();
        if(!msg){ alert('Escreva seu comentário antes de enviar.'); return; }
        const payload = { name, msg, ts: Date.now(), timestamp: serverTimestamp ? serverTimestamp() : null };

        if(usingFirestore && db){
          try {
            await addDoc(collection(db, 'comments'), { name, msg, timestamp: serverTimestamp() });
            msgInput.value = '';
            nameInput.value = '';
            // onSnapshot atualiza a lista automaticamente
          } catch(e) {
            console.error('Erro salvando no Firestore:', e);
            alert('Erro salvando no servidor. Comentário será salvo localmente.');
            const arr = loadCommentsLocal(); arr.push({ name, msg, ts: Date.now() }); saveCommentsLocal(arr); renderCommentsLocal();
            msgInput.value = ''; nameInput.value = '';
          }
        } else {
          const arr = loadCommentsLocal(); arr.push({ name, msg, ts: Date.now() }); saveCommentsLocal(arr); renderCommentsLocal();
          msgInput.value = ''; nameInput.value = '';
        }
      });

      // Limpar comentários (cuidado: apagar no servidor remove para todos)
      clearBtn.addEventListener('click', async () => {
        if(!confirm('Deseja realmente apagar todos os comentários? (Se Firestore estiver ativo, serão removidos do servidor)')) return;
        if(usingFirestore && db){
          try {
            // remoção em lote (atenção: custo/limite)
            const snapshot = await getDocs(collection(db, 'comments'));
            const batch = writeBatch(db);
            snapshot.forEach(doc => batch.delete(doc.ref));
            await batch.commit();
            alert('Comentários apagados do servidor.');
          } catch(e) {
            console.error('Erro apagando no Firestore:', e);
            alert('Erro ao apagar no servidor.');
          }
        } else {
          localStorage.removeItem(commentsKey);
          renderCommentsLocal();
        }
      });

      // Cleanup listener ao sair
      window.addEventListener('beforeunload', () => { if(unsubscribe) unsubscribe(); });

      // navegação por hash
      function goToHash(){ const h = location.hash || '#home'; const el = document.querySelector(h); if(el) el.scrollIntoView({behavior:'smooth',block:'start'}); }
      window.addEventListener('hashchange', goToHash, false);
      if(location.hash) setTimeout(goToHash, 100);

    })();
  </script>
</body>
</html>
